<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Avigya Performance Boost</title>
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600&family=Space+Grotesk:wght@500;600&display=swap');
      :root {
        --bg: #0b0c10;
        --bg2: #141920;
        --panel: rgba(18, 21, 26, 0.85);
        --panel2: rgba(24, 28, 34, 0.9);
        --stroke: rgba(255,255,255,0.10);
        --text: #f5f3ee;
        --muted: rgba(245,243,238,0.68);
        --link: #ffffff;
        --shadow: rgba(0,0,0,0.45);
        --accent: #f2f0ea;
        --accent-text: #0b0c10;
        --danger: #b64555;
      }
      * { box-sizing: border-box; }
      body {
        background: radial-gradient(1200px 700px at 15% 0%, rgba(255,255,255,0.10), transparent 60%), linear-gradient(145deg, var(--bg), var(--bg2));
        color: var(--text);
        font-family: "Manrope", ui-sans-serif, system-ui;
        margin: 0;
      }
      a { color: var(--link); text-decoration: none; }
      a:hover { text-decoration: underline; }
      .wrap { max-width: 1200px; margin: 0 auto; padding: 32px 24px 48px; }
      .hero { border: 1px solid var(--stroke); border-radius: 20px; padding: 26px; background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02)); box-shadow: 0 18px 38px var(--shadow); }
      .brand-bar { display: flex; align-items: center; gap: 14px; margin-bottom: 16px; }
      .brand-logo { height: 34px; width: auto; display: block; filter: drop-shadow(0 10px 18px rgba(0,0,0,0.35)); }
      h1 { margin: 0 0 8px; font-size: 34px; letter-spacing: 0.5px; font-family: "Space Grotesk", "Manrope", sans-serif; }
      .muted { color: var(--muted); font-size: 12px; }
      .row { display: grid; grid-template-columns: 420px 1fr; gap: 18px; margin-top: 20px; }
      @media (max-width: 980px) { .row { grid-template-columns: 1fr; } }
      .card { border: 1px solid var(--stroke); border-radius: 16px; padding: 16px; background: var(--panel2); box-shadow: 0 12px 26px var(--shadow); }
      .brand-stack { display: flex; flex-direction: column; gap: 14px; }
      .brand-card { border: 1px solid var(--stroke); border-radius: 18px; padding: 16px; background: linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); box-shadow: 0 14px 28px var(--shadow); }
      .brand-title { font-size: 20px; font-family: "Space Grotesk", "Manrope", sans-serif; letter-spacing: 0.4px; margin: 0 0 8px; }
      .campaign-accordion { border-top: 1px solid rgba(255,255,255,0.06); padding-top: 8px; margin-top: 8px; }
      .campaign-accordion summary { cursor: pointer; list-style: none; }
      .campaign-accordion summary::-webkit-details-marker { display: none; }
      .campaign-title { display: flex; justify-content: space-between; align-items: center; gap: 10px; font-size: 13px; font-weight: 600; }
      .campaign-left { display: flex; align-items: center; gap: 8px; }
      .campaign-name { letter-spacing: 0.2px; }
      .chev { font-size: 12px; opacity: 0.7; transition: transform 0.2s ease; }
      details[open] .chev { transform: rotate(180deg); }
      .adset-list { margin: 8px 0 0 0; padding-left: 18px; }
      input[type=text], select { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid var(--stroke); background: rgba(0,0,0,0.35); color: var(--text); }
      button { padding: 10px 14px; border-radius: 12px; border: 1px solid var(--stroke); background: rgba(255,255,255,0.08); color: var(--text); cursor: pointer; font-family: "Manrope", ui-sans-serif, system-ui; }
      button:hover { background: rgba(255,255,255,0.14); }
      .btn-primary { background: var(--accent); color: var(--accent-text); border-color: rgba(255,255,255,0.4); }
      .btn-primary:hover { filter: brightness(0.96); }
      .btn-danger { background: rgba(182,69,85,0.22); border-color: rgba(182,69,85,0.5); }
      .stack { display: flex; flex-direction: column; gap: 10px; }
      ul { padding-left: 18px; margin: 0; }
      li { margin-bottom: 6px; }
      code { background: rgba(255,255,255,0.08); padding: 2px 6px; border-radius: 8px; border: 1px solid var(--stroke); }
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="hero">
        <div class="brand-bar">
          <img class="brand-logo" src="/assets/avigya-horizontal.png" alt="Avigya" />
        </div>
        <h1>Avigya Performance Boost</h1>
        <div class="muted">Live multi-ratio previews while working, so users can validate adapts early.</div>
      </div>
      <div class="row">
        <div class="card">
          <h2 style="margin:0 0 10px; font-size:14px; text-transform:uppercase; letter-spacing:0.3px;">Create ad set</h2>
          <form method="post" action="/projects">
            <div class="stack">
              <div>
                <label class="muted" for="brand-name">Brand</label>
                <input type="text" id="brand-name" name="brand_name" placeholder="Type or select brand" list="brand-options" />
                <datalist id="brand-options">
                  {% for brand in brand_options %}
                    <option value="{{ brand }}"></option>
                  {% endfor %}
                </datalist>
                <div class="muted" style="margin-top:6px;">Select an existing brand or type a new one.</div>
              </div>
              <div>
                <label class="muted" for="campaign-name">Campaign</label>
                <input type="text" id="campaign-name" name="campaign_name" placeholder="Campaign (optional)" />
              </div>
              <div>
                <label class="muted" for="adset-name">Ad set name</label>
                <input type="text" id="adset-name" name="name" placeholder="Ad set name" required />
              </div>
              <div>
                <button class="btn-primary" type="submit">Create ad set</button>
              </div>
            </div>
          </form>
        </div>
        <div class="brand-stack">
          <div class="card">
            <h2 style="margin:0; font-size:14px; text-transform:uppercase; letter-spacing:0.3px;">Brand > Campaign > Ad set</h2>
            <div class="muted" style="margin-top:6px;">Browse by brand, expand campaigns, then open the relevant ad set.</div>
          </div>
          {% if projects %}
            {% for brand, campaigns in grouped.items() %}
              <div class="brand-card">
                <h3 class="brand-title">{{ brand }}</h3>
                {% for campaign, items in campaigns.items() %}
                  <details class="campaign-accordion" {% if loop.first %}open{% endif %}>
                    <summary class="campaign-title">
                      <span class="campaign-left">
                        <span class="campaign-name">{{ campaign }}</span>
                        <span class="chev">â–¾</span>
                      </span>
                      <span class="muted">{{ items|length }} ad set{% if items|length != 1 %}s{% endif %}</span>
                    </summary>
                    <ul class="adset-list">
                      {% for p in items %}
                        <li>
                          <a href="/projects/{{ p.project_id }}">{{ p.name }}</a>
                          <span class="muted">(created {{ p.created_at }})</span>
                        </li>
                      {% endfor %}
                    </ul>
                  </details>
                {% endfor %}
              </div>
            {% endfor %}
          {% else %}
            <div class="card">
              <p class="muted">No ad sets yet.</p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
  </body>
</html>
